---

title: Title


keywords: fastai
sidebar: home_sidebar



nb_path: "05_Feature_DBPedia_EntityResolution.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 05_Feature_DBPedia_EntityResolution.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<center><strong style="font-size:40px">Entity Linking</strong></center><p>The notebook is created to resolve entities based on DBpedia Spotlight trained data. The functions listed in the notebook analyses a sentence and identifies entites in that and then connect them to their DBpedia link along with some similarity score</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="dbpedia_response" class="doc_header"><code>dbpedia_response</code><a href="https://git.uk/machine-learning/data-science-and-statistical-learning/am_combiner/tree/master/am_combiner/features/entity_linking.py#L16" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>dbpedia_response</code>(<strong><code>text</code></strong>:<code>str</code>, <strong><code>url</code></strong>:<code>str</code>=<em><code>'https://api.dbpedia-spotlight.org/en/annotate'</code></em>, <strong><code>entities</code></strong>:<code>str</code>=<em><code>['Person', 'Organisation', 'Place']</code></em>)</p>
</blockquote>
<p>The dbpedia_response function accepts a document as a string and then divides it into
sentences as the dbpedia api doesn't support large text annotations.</p>
<p>Also it takes the rest api URL for DBpedia Spotlight and a list of entities that we need to
search for from a dictionry which can passed as a part of the config</p>
<p>It annotates the article text sentence by sentence based on the pretrained dbpedia model
and identifies the words of importance and obtains the dbpedia uri,similarity score etc for the word</p>
<p>The function</p>
<h2 id="Parameters:">Parameters:<a class="anchor-link" href="#Parameters:"> </a></h2><p>text: str,
    The documents which needs to be annotated
config_dict: dict,
    The dictionary containing the parameters for creating the resp api request.
    It has two keys
    url: str,
        The dbpedia rest api URL
    entities: list,
        The list of entities that we will try to annotate for. We pass all the entities together</p>
<h2 id="Returns:">Returns:<a class="anchor-link" href="#Returns:"> </a></h2><p>extracted_tuples: list,
    The list of tuples which contains the dbpedia uri, the exact word that it resolved, the similarity score
    for all the annotated words in the document
extracted_uri: list,
    The unique list of URIs for the words that got annotated. It is an extention of the earlier tuples list
    for downstream application</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="EnititylinkVisitor" class="doc_header"><code>class</code> <code>EnititylinkVisitor</code><a href="https://git.uk/machine-learning/data-science-and-statistical-learning/am_combiner/tree/master/am_combiner/features/entity_linking.py#L75" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>EnititylinkVisitor</code>(<strong><code>track_features</code></strong>:<code>bool</code>=<em><code>False</code></em>) :: <code>ArticleVisitor</code></p>
</blockquote>
<p>This class is a concrete implementation of a visitor pattern.
This implementation makes sure that any tokens in entity name are not part of extracted PERSON/ORG tuples.</p>
<h2 id="Attributes">Attributes<a class="anchor-link" href="#Attributes"> </a></h2>
<pre><code>track_features: bool
    See the base class</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">New_Article</span><span class="o">.</span><span class="n">accept_visitor</span><span class="p">(</span><span class="n">EnititylinkVisitor</span><span class="p">())</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">New_Article</span><span class="o">.</span><span class="n">extracted_entities</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>defaultdict(set,
            {&lt;Features.ORG: 4&gt;: {AGENCE FRANCE-PRESSE,
              The Manila,
              AGENCE FRANCE-PRESSE,
              World Boxing Organization,
              the Golden State Warriors,
              Wimbledon,
              Nadal,
              the French Ligue 1 club,
              Serie A,
              SEOUL},
             &lt;Features.DATE: 9&gt;: {1165,
              12 years old .Nine,
              a day,
              Sunday,
              two-year,
              two days,
              Monday -LRB- Tuesday,
              last month,
              17-year-old,
              three-year,
              Monday,
              Monday -LRB- Tuesday,
              20-year-old,
              Tuesday,
              Tuesday,
              65,
              Monday,
              Tuesday,
              2030},
             &lt;Features.GPE: 11&gt;: {Ethiopia,
              Nyadet,
              South Sudan,
              Philippines,
              Brisbane,
              LOS ANGELES,
              LONDON,
              Australia,
              Manila,
              PARIS,
              Bordeaux,
              Manila,
              North Korea,
              United States,
              Alaska,
              Singapore,
              Vietnam,
              Hanoi},
             &lt;Features.CARDINAL: 6&gt;: {Eight, two, 6, 6, 6, 10 million, two},
             &lt;Features.PERSON: 1&gt;: {Manny Pacquiao,
              Jeff Horn,
              Kevin Durant,
              Stephen Curry,
              Rafael Nadal,
              John Millman,
              George Weah,
              Weah,
              Rongda,
              Wuhan Zall,
              BORDEAUX,
              Adam Ounas,
              Lee Kuan Yew,
              Hsien Yang,
              Lee Hsien Loong},
             &lt;Features.NORP: 7&gt;: {Australian,
              Liberian,
              Chinese,
              Napoli,
              Americans},
             &lt;Features.MONEY: 20&gt;: {about $ 53 million, 11.3},
             &lt;Features.ORDINAL: 19&gt;: {second,
              second,
              850th,
              10th,
              50th,
              fourth,
              first},
             &lt;Features.EVENT: 8&gt;: {French Open, Franco-Algerian},
             &lt;Features.FAC: 3&gt;: {Paris Saint-Germain &#39;s},
             &lt;Features.PRODUCT: 18&gt;: {2-1},
             &lt;Features.TIME: 12&gt;: {seven minutes},
             &lt;Features.ENTITY_TUPLES: 27&gt;: [(&#39;http://dbpedia.org/resource/Agence_France-Presse&#39;,
               &#39;AGENCE FRANCE-PRESSE&#39;,
               &#39;0.9999999999999147&#39;),
              (&#39;http://dbpedia.org/resource/Manila&#39;,
               &#39;Manila&#39;,
               &#39;0.994662832886697&#39;),
              (&#39;http://dbpedia.org/resource/Agence_France-Presse&#39;,
               &#39;AGENCE FRANCE-PRESSE&#39;,
               &#39;1.0&#39;),
              (&#39;http://dbpedia.org/resource/Ethiopia&#39;,
               &#39;Ethiopia&#39;,
               &#39;0.9997344537872828&#39;),
              (&#39;http://dbpedia.org/resource/South_Sudan&#39;,
               &#39;South Sudan&#39;,
               &#39;0.9999128706001956&#39;),
              (&#39;http://dbpedia.org/resource/Manny_Pacquiao&#39;,
               &#39;Manny Pacquiao&#39;,
               &#39;0.9999999687271388&#39;),
              (&#39;http://dbpedia.org/resource/Jeff_Horn&#39;, &#39;Jeff Horn&#39;, &#39;1.0&#39;),
              (&#39;http://dbpedia.org/resource/Philippines&#39;,
               &#39;Philippines&#39;,
               &#39;0.9998962098746632&#39;),
              (&#39;http://dbpedia.org/resource/World_Boxing_Organization&#39;,
               &#39;World Boxing Organization&#39;,
               &#39;1.0&#39;),
              (&#39;http://dbpedia.org/resource/Brisbane&#39;,
               &#39;Brisbane&#39;,
               &#39;0.9969987931590609&#39;),
              (&#39;http://dbpedia.org/resource/Kevin_Durant&#39;,
               &#39;Kevin Durant&#39;,
               &#39;1.0&#39;),
              (&#39;http://dbpedia.org/resource/Golden_State_Warriors&#39;,
               &#39;Golden State Warriors&#39;,
               &#39;1.0&#39;),
              (&#39;http://dbpedia.org/resource/Stephen_Curry&#39;,
               &#39;Stephen Curry&#39;,
               &#39;1.0&#39;),
              (&#39;http://dbpedia.org/resource/Rafael_Nadal&#39;,
               &#39;Rafael Nadal&#39;,
               &#39;1.0&#39;),
              (&#39;http://dbpedia.org/resource/Love_Runs_Blind&#39;,
               &#39;LRB&#39;,
               &#39;0.9438842734955344&#39;),
              (&#39;http://dbpedia.org/resource/Manila&#39;,
               &#39;Manila&#39;,
               &#39;0.9983448354797262&#39;),
              (&#39;http://dbpedia.org/resource/Paris&#39;,
               &#39;PARIS&#39;,
               &#39;0.9999015649865464&#39;),
              (&#39;http://dbpedia.org/resource/George_Weah&#39;,
               &#39;George Weah&#39;,
               &#39;1.0&#39;),
              (&#39;http://dbpedia.org/resource/Paris_Saint-Germain_F.C.&#39;,
               &#39;Paris Saint-Germain&#39;,
               &#39;0.9999753944865698&#39;),
              (&#39;http://dbpedia.org/resource/France&#39;,
               &#39;French&#39;,
               &#39;0.9912641473607046&#39;),
              (&#39;http://dbpedia.org/resource/Ligue_1&#39;,
               &#39;Ligue 1&#39;,
               &#39;0.9999999879509006&#39;),
              (&#39;http://dbpedia.org/resource/Saint_Timothy&#39;,
               &#39;Timothy&#39;,
               &#39;0.9783751209395299&#39;),
              (&#39;http://dbpedia.org/resource/George_Weah&#39;,
               &#39;Weah&#39;,
               &#39;0.999999981751927&#39;),
              (&#39;http://dbpedia.org/resource/Baoding&#39;,
               &#39;Baoding&#39;,
               &#39;0.9999999979570475&#39;),
              (&#39;http://dbpedia.org/resource/Wuhan_Zall_F.C.&#39;,
               &#39;Wuhan Zall&#39;,
               &#39;1.0&#39;),
              (&#39;http://dbpedia.org/resource/FC_Girondins_de_Bordeaux&#39;,
               &#39;Bordeaux&#39;,
               &#39;0.9956206909113525&#39;),
              (&#39;http://dbpedia.org/resource/Adam&#39;,
               &#39;Adam&#39;,
               &#39;0.9200848236930371&#39;),
              (&#39;http://dbpedia.org/resource/Serie_A&#39;,
               &#39;Serie A&#39;,
               &#39;0.9999953732308483&#39;),
              (&#39;http://dbpedia.org/resource/S.S.C._Napoli&#39;,
               &#39;Napoli&#39;,
               &#39;0.999999972461865&#39;),
              (&#39;http://dbpedia.org/resource/Ligue_1&#39;,
               &#39;Ligue 1&#39;,
               &#39;0.9999997728750971&#39;),
              (&#39;http://dbpedia.org/resource/Love_Runs_Blind&#39;,
               &#39;LRB&#39;,
               &#39;0.9203246415061693&#39;),
              (&#39;http://dbpedia.org/resource/Manila&#39;,
               &#39;Manila&#39;,
               &#39;0.9987188457127306&#39;),
              (&#39;http://dbpedia.org/resource/Love_Runs_Blind&#39;,
               &#39;LRB&#39;,
               &#39;0.8869303148141389&#39;),
              (&#39;http://dbpedia.org/resource/Seoul&#39;,
               &#39;SEOUL&#39;,
               &#39;0.9996984844696286&#39;),
              (&#39;http://dbpedia.org/resource/North_Korea&#39;,
               &#39;North Korea&#39;,
               &#39;0.9415649813150418&#39;),
              (&#39;http://dbpedia.org/resource/United_States&#39;,
               &#39;United States&#39;,
               &#39;0.9999929876846937&#39;),
              (&#39;http://dbpedia.org/resource/Alaska&#39;,
               &#39;Alaska&#39;,
               &#39;0.9999318462477264&#39;),
              (&#39;http://dbpedia.org/resource/Singapore&#39;,
               &#39;Singapore&#39;,
               &#39;0.9975659118624942&#39;),
              (&#39;http://dbpedia.org/resource/Lee_Kuan_Yew&#39;,
               &#39;Lee Kuan Yew&#39;,
               &#39;1.0&#39;),
              (&#39;http://dbpedia.org/resource/Robert_E._Lee&#39;,
               &#39;Lee&#39;,
               &#39;0.9633080069642384&#39;),
              (&#39;http://dbpedia.org/resource/Lee_Hsien_Loong&#39;,
               &#39;Lee Hsien Loong&#39;,
               &#39;1.0&#39;),
              (&#39;http://dbpedia.org/resource/Hanoi&#39;,
               &#39;HANOI&#39;,
               &#39;0.9998416780316381&#39;),
              (&#39;http://dbpedia.org/resource/Vietnam&#39;,
               &#39;Vietnam&#39;,
               &#39;0.9978550782780428&#39;),
              (&#39;http://dbpedia.org/resource/Hanoi&#39;,
               &#39;Hanoi&#39;,
               &#39;0.9999973792989415&#39;),
              (&#39;http://dbpedia.org/resource/Hanoi&#39;,
               &#39;Hanoi&#39;,
               &#39;0.9999973792989415&#39;)],
             &lt;Features.ENTITY_URI: 28&gt;: {&#39;http://dbpedia.org/resource/Adam&#39;,
              &#39;http://dbpedia.org/resource/Agence_France-Presse&#39;,
              &#39;http://dbpedia.org/resource/Alaska&#39;,
              &#39;http://dbpedia.org/resource/Baoding&#39;,
              &#39;http://dbpedia.org/resource/Brisbane&#39;,
              &#39;http://dbpedia.org/resource/Ethiopia&#39;,
              &#39;http://dbpedia.org/resource/FC_Girondins_de_Bordeaux&#39;,
              &#39;http://dbpedia.org/resource/France&#39;,
              &#39;http://dbpedia.org/resource/George_Weah&#39;,
              &#39;http://dbpedia.org/resource/Golden_State_Warriors&#39;,
              &#39;http://dbpedia.org/resource/Hanoi&#39;,
              &#39;http://dbpedia.org/resource/Jeff_Horn&#39;,
              &#39;http://dbpedia.org/resource/Kevin_Durant&#39;,
              &#39;http://dbpedia.org/resource/Lee_Hsien_Loong&#39;,
              &#39;http://dbpedia.org/resource/Lee_Kuan_Yew&#39;,
              &#39;http://dbpedia.org/resource/Ligue_1&#39;,
              &#39;http://dbpedia.org/resource/Love_Runs_Blind&#39;,
              &#39;http://dbpedia.org/resource/Manila&#39;,
              &#39;http://dbpedia.org/resource/Manny_Pacquiao&#39;,
              &#39;http://dbpedia.org/resource/North_Korea&#39;,
              &#39;http://dbpedia.org/resource/Paris&#39;,
              &#39;http://dbpedia.org/resource/Paris_Saint-Germain_F.C.&#39;,
              &#39;http://dbpedia.org/resource/Philippines&#39;,
              &#39;http://dbpedia.org/resource/Rafael_Nadal&#39;,
              &#39;http://dbpedia.org/resource/Robert_E._Lee&#39;,
              &#39;http://dbpedia.org/resource/S.S.C._Napoli&#39;,
              &#39;http://dbpedia.org/resource/Saint_Timothy&#39;,
              &#39;http://dbpedia.org/resource/Seoul&#39;,
              &#39;http://dbpedia.org/resource/Serie_A&#39;,
              &#39;http://dbpedia.org/resource/Singapore&#39;,
              &#39;http://dbpedia.org/resource/South_Sudan&#39;,
              &#39;http://dbpedia.org/resource/Stephen_Curry&#39;,
              &#39;http://dbpedia.org/resource/United_States&#39;,
              &#39;http://dbpedia.org/resource/Vietnam&#39;,
              &#39;http://dbpedia.org/resource/World_Boxing_Organization&#39;,
              &#39;http://dbpedia.org/resource/Wuhan_Zall_F.C.&#39;}})</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

